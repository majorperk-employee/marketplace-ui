<app-global-nav></app-global-nav>

<nz-page-header nzTitle="Shopping Cart"></nz-page-header>

<nz-table
  #rowSelectionTable
  nzShowSizeChanger
  [nzData]="cart.items"
  (nzCurrentPageDataChange)="currentPageDataChange($event)"
  [nzFooter]="footerTemplate"
  [nzPaginationPosition]="'top'"
  [nzLoading]="isLoading">
  <thead>
    <tr>
      <th
        nzShowCheckbox
        [(nzChecked)]="isAllDisplayDataChecked"
        [nzIndeterminate]="isIndeterminate"
        (nzCheckedChange)="checkAll($event)"></th>
      <th>Id</th>
      <th>Price</th>
      <th>Name</th>
      <th nzWidth="70px">Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let item of cart.items">
      <td nzShowCheckbox [(nzChecked)]="mapOfCheckedId[item.id]" (nzCheckedChange)="refreshStatus()"></td>
      <td>{{ item.id }}</td>
      <td>{{ item.price }}</td>
      <td>{{ item.name }}</td>
      <td nzWidth="70px"><i nz-icon nzType="delete" class="delete" (click)="deleteOne(item.id)"></i></td>
    </tr>
  </tbody>
</nz-table>

<ng-template #footerTemplate>

  <p style="align-items: center">
      <tbody>
        <tr><strong>Cart Count:</strong> {{cart.items.length}} items</tr>
        <tr><strong>Cart Total:</strong> {{cart.total}} points</tr>
      </tbody>
  </p>

    <button *ngIf="isIndeterminate" nz-button nzType="danger" (click)="deleteMany()" nzBlock><i nz-icon type="delete"></i>Delete Selected</button>
    <button *ngIf="!isIndeterminate" nz-button nzType="primary" nzBlock><i nz-icon type="shopping"></i>Complete Checkout</button>
</ng-template>

<ng-template #loadingTemplate>
  <i nz-icon [nzType]="'loading'"></i>
</ng-template>